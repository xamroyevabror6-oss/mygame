<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>Abror Quiz Game</title>
<style>
body{
  margin:0;font-family:Arial;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:white;text-align:center;
}
.container{max-width:600px;margin:auto;padding:20px}
button{
  width:100%;padding:14px;margin:8px 0;font-size:18px;border:none;border-radius:10px;background:#00c6ff;cursor:pointer;
}
button:hover{background:#00f2fe}
.hidden{display:none}
.top{display:flex;justify-content:space-between;margin-bottom:10px;}
</style>
</head>
<body>

<div class="container">

<div id="menu">
  <h1>ğŸ® Bilimlar Oâ€˜yini</h1>
  <button onclick="start('math')">ğŸ“ Matematika</button>
  <button onclick="start('history')">ğŸ“œ Tarix</button>
  <button onclick="start('psy')">ğŸ§  Psixologiya</button>
  <button onclick="start('lang')">ğŸ“š Ona tili</button>
</div>

<div id="game" class="hidden">
  <div class="top">
    <div id="score">0/0</div>
    <button onclick="finish()">âŒ Tugatish</button>
  </div>
  <h2 id="question"></h2>
  <div id="options"></div>
</div>

</div>

<script>
// ===== HAR FANDA 200 TA SAVOL (NAMUNA) =====
// Matematika: 1â€“200
const mathQ = [];
for(let i=1;i<=200;i++){
  const a=i%50+1;
  const b=(i*3)%50+1;
  const correct=a+b;
  mathQ.push({
    q:`${a} + ${b} = ?`,
    options:[correct-1,correct,correct+1],
    a:1
  });
}

// Tarix: 1â€“200
const historyQ = [];
for(let i=1;i<=200;i++){
  historyQ.push({
    q:`Tarix savol â„–${i}?`,
    options:["Variant 1","Variant 2","Variant 3"],
    a:0
  });
}

// Psixologiya: 1â€“200
const psyQ = [];
for(let i=1;i<=200;i++){
  psyQ.push({
    q:`Psixologik savol â„–${i}?`,
    options:["Variant A","Variant B","Variant C"],
    a:0
  });
}

// Ona tili: 1â€“200
const langQ = [];
for(let i=1;i<=200;i++){
  langQ.push({
    q:`Ona tili savol â„–${i}?`,
    options:["Variant X","Variant Y","Variant Z"],
    a:0
  });
}

// ===== Oâ€˜YIN LOGIKASI =====
let current=[], idx=0, correct=0, total=0;
let used = new Set();

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

function start(type){
  used.clear();
  if(type==="math") current=[...mathQ];
  if(type==="history") current=[...historyQ];
  if(type==="psy") current=[...psyQ];
  if(type==="lang") current=[...langQ];
  shuffle(current);
  idx=0; correct=0; total=0;
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  nextQ();
}

function nextQ(){
  if(used.size >= current.length){
    alert("Barcha savollar tugadi!\nNatija: "+correct+"/"+total+" ("+Math.round(correct*100/total)+"%)");
    location.reload();
    return;
  }

  let q;
  let attempts=0;
  do{
    q=current[Math.floor(Math.random()*current.length)];
    attempts++;
  }while(used.has(q.q) && attempts<1000);

  used.add(q.q);
  document.getElementById("question").innerText=q.q;
  const o=document.getElementById("options");
  o.innerHTML="";
  q.options.forEach((x,i)=>{
    const b=document.createElement("button");
    b.innerText=x;
    b.onclick=()=>check(i,q.a);
    o.appendChild(b);
  });
}

function check(i,a){
  total++; if(i===a) correct++;
  document.getElementById("score").innerText=`${correct}/${total}`;
  nextQ();
}

function finish(){
  alert(`Natija: ${correct}/${total} (${Math.round(correct*100/total)}%)`);
  location.reload();
}
</script>

</body>
</html>
